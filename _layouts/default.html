<!doctype html>
<html lang="{{ page.lang | default: site.lang }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page.title }} | {{ site.title }}</title>
    {% assign meta_desc = page.description | default: site.description | strip_html | strip_newlines %}
    <meta name="description" content="{{ meta_desc | escape }}">
    <link rel="canonical" href="{{ site.url }}{{ page.url }}">

    {% assign org_name = site.url | replace: "https://", "" | replace: "http://", "" | split: "/" | first %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Organization",
          "@id": "{{ site.url }}/#organization",
          "name": {{ org_name | jsonify }},
          "url": "{{ site.url }}/"
        },
        {
          "@type": "WebSite",
          "@id": "{{ site.url }}/#website",
          "url": "{{ site.url }}/",
          "name": {{ site.title | jsonify }},
          "description": {{ site.description | strip_html | strip_newlines | jsonify }},
          "inLanguage": {{ site.lang | jsonify }},
          "publisher": { "@id": "{{ site.url }}/#organization" }
        },
        {
          "@type": "WebPage",
          "@id": "{{ site.url }}{{ page.url }}#webpage",
          "url": "{{ site.url }}{{ page.url }}",
          "name": {{ page.title | default: site.title | jsonify }},
          "description": {{ meta_desc | jsonify }},
          "isPartOf": { "@id": "{{ site.url }}/#website" },
          "inLanguage": {{ page.lang | default: site.lang | jsonify }},
          "publisher": { "@id": "{{ site.url }}/#organization" }
          {% if site.author %},
          "author": {
            "@type": "Person",
            "name": {{ site.author | jsonify }}
          }
          {% endif %}
        }
      ]
    }
    </script>

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{ site.title | escape }}">
    <meta property="og:title" content="{{ page.title | default: site.title | escape }}">
    <meta property="og:description" content="{{ meta_desc | escape }}">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{{ page.title | default: site.title | escape }}">
    <meta name="twitter:description" content="{{ meta_desc | escape }}">
    <link rel="stylesheet" href="/assets/css/site.css">

    {% assign current_lang = page.lang | default: site.lang %}
    {% assign x_default_href = nil %}
    {% if site.data.langs %}
      {% for l in site.data.langs %}
        {% if l.url and l.code %}
          {% if l.url contains '://' %}
            {% assign alt_href = l.url %}
          {% else %}
            {% assign alt_href = site.url | append: l.url %}
          {% endif %}

          {% if l.code == 'en' and x_default_href == nil %}
            {% assign x_default_href = alt_href %}
          {% endif %}

    <link rel="alternate" href="{{ alt_href }}" hreflang="{{ l.code }}">
        {% endif %}
      {% endfor %}

      {% if x_default_href %}
    <link rel="alternate" href="{{ x_default_href }}" hreflang="x-default">
      {% endif %}
    {% endif %}
  </head>
  <body>
    {% include header.html %}
    <main>
      {{ content }}
    </main>
    {% include footer.html %}
  </body>
</html>
